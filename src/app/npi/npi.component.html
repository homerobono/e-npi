<div class='container'>
  <div class='row justify-content-center'>
    <div class='col body-main'>
      <app-nav-buttons></app-nav-buttons>
      <div class='row justify-content-left pb-0'>
        <div class='col'>
          <div class='row justify-content-left pb-0 align-items-center'>
            <h3 class='mb-0 pr-0' [ngClass]='{"col":!titleEdit,"col-auto":titleEdit}'>
                  NPI #{{ npi.number }} - 
                <span id='titleLabel'
                  *ngIf='!titleEdit' #name [ngClass]='
                  {"text-primary": titleField != npi.name && 
                    route.firstChild.snapshot.routeConfig.path=="edit"
                  }'>
                  {{
                    this.route.firstChild.snapshot.routeConfig.path=="edit" ? 
                    titleField : npi.name
                  }}
                </span>
            </h3>
            <div class="col input-group input-group-lg"
            [style.display]='titleEdit?"flex":"none"'>
              <input type=text class='form-control' (keyup)="changeTitle($event)" 
              (clickOutside)="toggleTitleEdit($event)" name='titleInput'
              autofocus id='titleInput' [(ngModel)]='titleField'>
            </div>
            <div class='col-auto mt-1 align-self-center'>
              <span class='badge mt-1 col-auto' [ngClass]='{
                "badge-success" : npi.entry=="pixel",
                "badge-purple" : npi.entry=="oem",
                "badge-secondary" : npi.entry=="internal",
                "badge-info" : npi.entry=="custom"
                }'>
                {{ npi.entryLabel }}
              </span>
            </div>
          </div>
          <div class='row justify-content-between'>
            <small class='col mb-0 mt-0'>
              <a routerLink='/users/{{ authorId }}'>
                {{ authorName }}</a>, {{ npi.createdString }}
            </small>
            <div class='col mb-0 mt-0 text-right'>
              <span class='fa fa-circle' [ngClass]='{
              "text-danger" : npi.stage == 0,
              "text-secondary" : npi.stage == 1,
              "text-warning" : npi.stage == 2,
              "text-success" : npi.stage == 3,
              "text-info" : npi.stage == 4
              }'></span>
              <i class='text-secondary'> {{ npi.status }} </i>
            </div>
          </div>
        </div>
        <div class='col-auto pl-0 ml-0'>
          <div class='row justify-content-left pb-0'>
            <div class='col text-right' *ngIf='route.firstChild.snapshot.routeConfig.path==""'>
              <a routerLink='edit' class='text-info'>
                <i class='fa fa-pencil fa-2x' style='text-shadow: 1px 3px 10px #ccc'></i>
              </a>
            </div>
            <div class='col text-right' *ngIf='route.firstChild.snapshot.routeConfig.path=="edit"'>
              <a routerLink='/npi/{{ npi.number }}/' class='text-secondary'>
                <i class='fa fa-search fa-2x' style='text-shadow: 1px 3px 10px #ccc'></i>
              </a>
            </div>
          </div>
        </div>
      </div>
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
